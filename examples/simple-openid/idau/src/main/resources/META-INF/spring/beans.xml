<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:ns2="http://www.springframework.org/schema/osgi" xmlns:ns3="http://www.springframework.org/schema/tool" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd http://www.springframework.org/schema/osgi http://www.springframework.org/schema/osgi/spring-osgi.xsd">
    <description>simple-openid : IdAU Configuration generated by Atricore Console on 19 May 2011 05:24:21 GMT</description>
    <bean depends-on="simple-openid-cot,simple-openid-cot-manager,bpms-manager,cxf" class="org.atricore.idbus.kernel.main.mediation.osgi.OsgiIdentityMediationUnit" name="simple-openid-mediation-unit">
        <property name="name">
            <value>simple-openid-mediation-unit</value>
        </property>
        <property name="container">
            <ref bean="simple-openid-container"/>
        </property>
        <property name="channels">
            <list>
                <!--
                <ref bean="idp1-claims-channel"/>
                <ref bean="idp1-spnego-claims-channel"/>
                <ref bean="idp1-default-sp-channel"/>
                -->
                <ref bean="sp1-tc1-activation"/>
                <ref bean="sp1-default-idp-channel"/>
                <ref bean="tc1-josso-binding-channel"/>
            </list>
        </property>
    </bean>
    <bean class="org.atricore.idbus.kernel.main.mediation.camel.OsgiCamelIdentityMediationUnitContainerImpl" name="simple-openid-container">
        <property name="name">
            <value>simple-openid-engine</value>
        </property>
        <property name="cxfBus">
            <ref bean="cxf"/>
        </property>
    </bean>
    <bean depends-on="sp1" class="org.atricore.idbus.kernel.main.federation.metadata.CircleOfTrustImpl" name="simple-openid-cot">
        <property name="name">
            <value>simple-openid-cot</value>
        </property>
        <property name="providers">
            <set>
                <!--
                <ref bean="idp1"/>
                -->
                <ref bean="sp1"/>
                <ref bean="tc1"/>
            </set>
        </property>
    </bean>
    <bean class="org.atricore.idbus.kernel.main.federation.metadata.CircleOfTrustManagerImpl" name="simple-openid-cot-manager">
        <property name="cot">
            <ref bean="simple-openid-cot"/>
        </property>
    </bean>
    <bean factory-bean="cache-manager-factory" factory-method="getCacheManager" class="net.sf.ehcache.CacheManager" name="simple-openid-cache-manager"/>
    <bean class="org.atricore.idbus.kernel.main.mediation.state.EHCacheProviderStateManagerImpl" name="simple-openid-state-manager">
        <constructor-arg index="0">
            <ref bean="idbus-config"/>
        </constructor-arg>
        <property name="cacheManager">
            <ref bean="simple-openid-cache-manager"/>
        </property>
        <property name="cacheName">
            <value>org.atricore.idbus.examples.simple-openid.idau-psm-cache</value>
        </property>
        <property name="forceNonDirtyStorage">
            <value>false</value>
        </property>
    </bean>
    <bean scope="singleton" class="org.springframework.jmx.support.MBeanServerFactoryBean" name="mBeanServer">
        <property name="locateExistingServerIfPossible">
            <value>true</value>
        </property>
    </bean>
    <!-- No need to realize IdP since it's external
    <import resource="idp1/idp1-config.xml"/>
    -->
    <import resource="sp1/sp1-config.xml"/>
    <import resource="tc1/tc1-config.xml"/>
</beans>
