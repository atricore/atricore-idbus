<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:ns2="http://www.springframework.org/schema/osgi" xmlns:ns3="http://www.springframework.org/schema/tool" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd http://www.springframework.org/schema/osgi http://www.springframework.org/schema/osgi/spring-osgi.xsd">
    <description>TC1 : BP Configuration generated by Atricore Identity Bus Server on 19 May 2011 05:24:22 GMT Apache Tomcat One</description>
    <bean class="org.atricore.idbus.kernel.main.mediation.provider.BindingProviderImpl" name="tc1">
        <property name="name">
            <value>tc1</value>
        </property>
        <property name="role">
            <value>{urn:org:atricore:idbus:josso:metadata}JOSSOAgentDescriptor</value>
        </property>
        <property name="unitContainer">
            <ref bean="simple-iwa-container"/>
        </property>
        <property name="cotManager">
            <ref bean="simple-iwa-cot-manager"/>
        </property>
        <property name="stateManager">
            <ref bean="simple-iwa-state-manager"/>
        </property>
        <property name="bindingChannel">
            <ref bean="tc1-josso-binding-channel"/>
        </property>
    </bean>
    <bean class="org.atricore.idbus.capabilities.sso.management.internal.BindingProviderMBeanImpl" name="tc1-mbean">
        <property name="bindingProvider">
            <ref bean="tc1"/>
        </property>
    </bean>
    <bean class="org.springframework.jmx.export.MBeanExporter" name="tc1-mbean-exporter">
        <property name="server">
            <ref bean="mBeanServer"/>
        </property>
        <property name="beans">
            <map>
                <entry value-ref="tc1-mbean" key-ref="tc1-mbean-key"/>
            </map>
        </property>
    </bean>
    <bean class="java.lang.String" name="tc1-mbean-key">
        <constructor-arg type="java.lang.String" index="0">
            <value>org.atricore.idbus.examples.idau:type=BindingProvider,name=simple-iwa.tc1</value>
        </constructor-arg>
    </bean>
    <bean class="org.atricore.idbus.kernel.main.mediation.binding.BindingChannelImpl" name="tc1-josso-binding-channel">
        <property name="name">
            <value>tc1-josso-binding-channel</value>
        </property>
        <property name="description">
            <value>TC1</value>
        </property>
        <property name="provider">
            <ref bean="tc1"/>
        </property>
        <property name="location">
            <value>http://wsdev1.w2k3dev.atricore.com:8081/IDBUS/SIMPLE-IWA/TC1</value>
        </property>
        <property name="unitContainer">
            <ref bean="simple-iwa-container"/>
        </property>
        <property name="identityMediator">
            <ref bean="tc1-binding-a2Mediator"/>
        </property>
        <property name="endpoints">
            <list>
                <bean class="org.atricore.idbus.kernel.main.mediation.endpoint.IdentityMediationEndpointImpl" name="tc1-binding-ssop-slo-artifact">
                    <property name="name">
                        <value>tc1-binding-ssop-slo-artifact</value>
                    </property>
                    <property name="type">
                        <value>{urn:org:atricore:idbus:sso:metadata}SingleLogoutService</value>
                    </property>
                    <property name="binding">
                        <value>urn:org:atricore:idbus:sso:bindings:HTTP-Artifact</value>
                    </property>
                    <property name="location">
                        <value>/SSO/SLO/ARTIFACT</value>
                    </property>
                </bean>
                <bean class="org.atricore.idbus.kernel.main.mediation.endpoint.IdentityMediationEndpointImpl" name="tc1-binding-ssop-acs-artifact">
                    <property name="name">
                        <value>tc1-binding-ssop-acs-artifact</value>
                    </property>
                    <property name="type">
                        <value>{urn:org:atricore:idbus:sso:metadata}AssertionConsumerService</value>
                    </property>
                    <property name="binding">
                        <value>urn:org:atricore:idbus:sso:bindings:HTTP-Artifact</value>
                    </property>
                    <property name="location">
                        <value>/SSO/ACS/ARTIFACT</value>
                    </property>
                </bean>
                <bean class="org.atricore.idbus.kernel.main.mediation.endpoint.IdentityMediationEndpointImpl" name="tc1-binding-josso-sso-redir">
                    <property name="name">
                        <value>tc1-binding-josso-sso-redir</value>
                    </property>
                    <property name="type">
                        <value>{urn:org:atricore:idbus:capabilities:josso:services}SingleSignOnService</value>
                    </property>
                    <property name="binding">
                        <value>urn:org:atricore:idbus:sso:bindings:HTTP-Redirect</value>
                    </property>
                    <property name="location">
                        <value>/JOSSO/SSO/REDIR</value>
                    </property>
                </bean>
                <bean class="org.atricore.idbus.kernel.main.mediation.endpoint.IdentityMediationEndpointImpl" name="tc1-binding-josso-slo-redir">
                    <property name="name">
                        <value>tc1-binding-josso-slo-redir</value>
                    </property>
                    <property name="type">
                        <value>{urn:org:atricore:idbus:capabilities:josso:services}SingleLogoutService</value>
                    </property>
                    <property name="binding">
                        <value>urn:org:atricore:idbus:sso:bindings:HTTP-Redirect</value>
                    </property>
                    <property name="location">
                        <value>/JOSSO/SLO/REDIR</value>
                    </property>
                </bean>
                <bean class="org.atricore.idbus.kernel.main.mediation.endpoint.IdentityMediationEndpointImpl" name="tc1-binding-josso-ssoidm-soap">
                    <property name="name">
                        <value>tc1-binding-josso-ssoidm-soap</value>
                    </property>
                    <property name="type">
                        <value>{urn:org:atricore:idbus:capabilities:josso:services}SSOIdentityManager</value>
                    </property>
                    <property name="binding">
                        <value>urn:org:atricore:idbus:capabilities:josso:bindings:SOAP</value>
                    </property>
                    <property name="location">
                        <value>/JOSSO/SSOIdentityManager/SOAP</value>
                    </property>
                </bean>
                <bean class="org.atricore.idbus.kernel.main.mediation.endpoint.IdentityMediationEndpointImpl" name="tc1-binding-josso-ssoidp-soap">
                    <property name="name">
                        <value>tc1-binding-josso-ssoidp-soap</value>
                    </property>
                    <property name="type">
                        <value>{urn:org:atricore:idbus:capabilities:josso:services}SSOIdentityProvider</value>
                    </property>
                    <property name="binding">
                        <value>urn:org:atricore:idbus:capabilities:josso:bindings:SOAP</value>
                    </property>
                    <property name="location">
                        <value>/JOSSO/SSOIdentityProvider/SOAP</value>
                    </property>
                </bean>
                <bean class="org.atricore.idbus.kernel.main.mediation.endpoint.IdentityMediationEndpointImpl" name="tc1-binding-josso-ssosm-soap">
                    <property name="name">
                        <value>tc1-binding-josso-ssosm-soap</value>
                    </property>
                    <property name="type">
                        <value>{urn:org:atricore:idbus:capabilities:josso:services}SSOSessionManager</value>
                    </property>
                    <property name="binding">
                        <value>urn:org:atricore:idbus:capabilities:josso:bindings:SOAP</value>
                    </property>
                    <property name="location">
                        <value>/JOSSO/SSOSessionManager/SOAP</value>
                    </property>
                </bean>
            </list>
        </property>
    </bean>
    <bean class="org.atricore.idbus.capabilities.josso.main.JossoMediator" name="tc1-binding-a2Mediator">
        <property name="logMessages">
            <value>true</value>
        </property>
        <property name="bindingFactory">
            <bean class="org.atricore.idbus.capabilities.josso.main.binding.JossoBindingFactory"/>
        </property>
        <property name="artifactQueueManager">
            <ref bean="simple-iwa-aqm"/>
        </property>
        <property name="errorUrl">
            <value>http://wsdev1.w2k3dev.atricore.com:8081/idbus-ui/error.do</value>
        </property>
        <property name="logger">
            <bean class="org.atricore.idbus.kernel.main.mediation.camel.logging.XMLMediationLogger" name="tc1-mediation-logger">
                <property name="category">
                    <value>org.atricore.idbus.examples.simple-iwa.wire.tc1</value>
                </property>
                <property name="messageBuilders">
                    <list>
                        <bean class="org.atricore.idbus.capabilities.josso.main.binding.logging.JossoLogMessageBuilder"/>
                        <bean class="org.atricore.idbus.kernel.main.mediation.camel.component.logging.CamelLogMessageBuilder"/>
                        <bean class="org.atricore.idbus.kernel.main.mediation.camel.component.logging.HttpLogMessageBuilder"/>
                    </list>
                </property>
            </bean>
        </property>
        <property name="partnerAppMappings">
            <map>
                <entry>
                    <key>
                        <value>SP1</value>
                    </key>
                    <bean class="org.atricore.idbus.capabilities.josso.main.PartnerAppMapping" name="tc1-sp1-tc1-activation-partnerapp-mapping">
                        <property name="partnerAppId">
                            <value>SP1</value>
                        </property>
                        <property name="spAlias">
                            <value>http://wsdev1.w2k3dev.atricore.com:8081/IDBUS/SIMPLE-IWA/SP1/SAML2/MD</value>
                        </property>
                        <property name="partnerAppSLO">
                            <value>http://localhost:8080/</value>
                        </property>
                        <property name="partnerAppACS">
                            <value>http://localhost:8080/josso_security_check</value>
                        </property>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
</beans>
